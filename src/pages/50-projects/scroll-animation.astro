---
import Layout from "$layouts/Layout.astro"
---

<Layout title="Scroll Animation">
  <h1>Scroll to see the animation</h1>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
  <div class="box">
    <h2>Content</h2>
  </div>
</Layout>

<style>
  * {
    box-sizing: border-box;
  }

  body {
    background-color: #efedd6;
    height: initial;
    overflow-x: hidden;
    overflow-y: auto;
  }

  h1 {
    margin: 0.625rem;
  }

  .box {
    background-color: steelblue;
    color: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 25rem;
    height: 12.5rem;
    margin: 0.625rem;
    border-radius: 10px;
    box-shadow: 2px 4px 5px rgba(0, 0, 0, 0.3);
    transform: translateX(400%);
    transition: transform 0.4s ease;
  }

  .box:nth-of-type(even) {
    transform: translateX(-400%);
  }

  .box.show {
    transform: translateX(0);
  }

  .box h2 {
    font-size: 45px;
  }
</style>

<script>
  const boxes = document.querySelectorAll(".box")

  function checkBoxes() {
    const triggerBottom = (window.innerHeight / 5) * 4

    boxes.forEach((box) => {
      const boxTop = box.getBoundingClientRect().top

      if (boxTop < triggerBottom) {
        box.classList.add("show")
      } else {
        box.classList.remove("show")
      }
    })
  }
  checkBoxes()
  window.addEventListener("scroll", checkBoxes)
</script>
